---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "groundcover_policy Resource - groundcover"
subcategory: ""
description: |-
  Manages a groundcover RBAC policy.
---

# groundcover_policy (Resource)

Manages a groundcover RBAC policy.

## Example Usage

```terraform
# Configure the groundcover Provider
provider "groundcover" {
  # Configure API key using environment variable TF_VAR_groundcover_api_key is recommended
  # api_key = var.groundcover_api_key 
  # Or uncomment and set directly (less secure):
  # api_key = "YOUR_API_KEY_HERE"

  backend_id = "groundcover" # your backend ID as provided in the installation
  # Optionally override the base URL (defaults to api.groundcover.com)
  # api_url = "https://api.your-instance.groundcover.com"
}

# Optional: Define variable for API key (recommended)
# variable "groundcover_api_key" {
#   type        = string
#   description = "groundcover API Key"
#   sensitive   = true
#   nullable    = false # Ensure it's provided (e.g., via TF_VAR_...)
# }

# Define a groundcover Policy
resource "groundcover_policy" "my_policy" {
  name        = "Example Policy (Terraform)"
  description = "This policy is managed by Terraform."

  # Optional: Specify SSO claim role for mapping
  claim_role = "sso-admin-role"

  # Define policy roles (adjust keys/values as needed for your groundcover setup)
  role = {
    admin = "admin" # key is "read"/"write"/"admin" - value is ignored
  }

  # Optional: Define data scope restrictions
  data_scope = {
    simple = {
      operator = "and" # Can be "and" or "or"
      conditions = [
        {
          key    = "cluster"
          origin = "root"
          type   = "string"
          filters = [
            {
              op    = "match"
              value = "production-cluster"
            }
          ]
        },
        {
          key    = "namespace"
          origin = "root"
          type   = "string"
          filters = [
            {
              op    = "not_match"
              value = "kube-system"
            }
          ]
        }
      ]
    }
  }
}

# Output the generated policy UUID
output "policy_uuid" {
  description = "The unique ID (UUID) of the created policy."
  value       = groundcover_policy.my_policy.uuid
}

# Output the policy revision number
output "policy_revision_number" {
  description = "The revision number of the created policy."
  value       = groundcover_policy.my_policy.revision_number
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the policy.
- `role` (Map of String) Role definitions associated with the policy. Maps role identifiers to specific permissions or access levels.

### Optional

- `claim_role` (String) SSO Role claim name used for mapping.
- `data_scope` (Attributes) Defines the data scope restrictions for the policy. Either 'simple' or 'advanced' must be specified, but not both. (see [below for nested schema](#nestedatt--data_scope))
- `description` (String) A description for the policy.

### Read-Only

- `deprecated` (Boolean) Indicates if the policy is deprecated.
- `id` (String) The unique identifier (ID) of the policy. Same as UUID.
- `is_system_defined` (Boolean) Indicates if the policy is system-defined.
- `read_only` (Boolean) Indicates if the policy is read-only (managed internally).
- `revision_number` (Number) Revision number of the policy, used for concurrency control.
- `uuid` (String) The unique identifier (UUID) of the policy.

<a id="nestedatt--data_scope"></a>
### Nested Schema for `data_scope`

Optional:

- `advanced` (Attributes) Advanced data scope configuration. Allows per-data-type filtering rules for fine-grained access control. (see [below for nested schema](#nestedatt--data_scope--advanced))
- `simple` (Attributes) Simple data scope configuration. Applies a single set of filtering rules to all data types. (see [below for nested schema](#nestedatt--data_scope--simple))

<a id="nestedatt--data_scope--advanced"></a>
### Nested Schema for `data_scope.advanced`

Optional:

- `events` (Attributes) Data scope rules for events. (see [below for nested schema](#nestedatt--data_scope--advanced--events))
- `logs` (Attributes) Data scope rules for logs. (see [below for nested schema](#nestedatt--data_scope--advanced--logs))
- `metrics` (Attributes) Data scope rules for metrics. (see [below for nested schema](#nestedatt--data_scope--advanced--metrics))
- `traces` (Attributes) Data scope rules for traces. (see [below for nested schema](#nestedatt--data_scope--advanced--traces))
- `workloads` (Attributes) Data scope rules for workloads. (see [below for nested schema](#nestedatt--data_scope--advanced--workloads))

<a id="nestedatt--data_scope--advanced--events"></a>
### Nested Schema for `data_scope.advanced.events`

Required:

- `conditions` (Attributes List) List of conditions for the data scope. (see [below for nested schema](#nestedatt--data_scope--advanced--events--conditions))
- `operator` (String) Logical operator (e.g., 'and', 'or').

Optional:

- `disabled` (Boolean) Whether this data type is disabled (no data access). When true, users have no access to this data type.

<a id="nestedatt--data_scope--advanced--events--conditions"></a>
### Nested Schema for `data_scope.advanced.events.conditions`

Required:

- `filters` (Attributes List) List of filter criteria for the condition. (see [below for nested schema](#nestedatt--data_scope--advanced--events--conditions--filters))
- `key` (String) The key for the condition (e.g., 'environment').
- `origin` (String) The origin of the key.
- `type` (String) The type of the key.

<a id="nestedatt--data_scope--advanced--events--conditions--filters"></a>
### Nested Schema for `data_scope.advanced.events.conditions.filters`

Required:

- `op` (String) The filter operation (e.g., 'match').
- `value` (String) The value to filter on.




<a id="nestedatt--data_scope--advanced--logs"></a>
### Nested Schema for `data_scope.advanced.logs`

Required:

- `conditions` (Attributes List) List of conditions for the data scope. (see [below for nested schema](#nestedatt--data_scope--advanced--logs--conditions))
- `operator` (String) Logical operator (e.g., 'and', 'or').

Optional:

- `disabled` (Boolean) Whether this data type is disabled (no data access). When true, users have no access to this data type.

<a id="nestedatt--data_scope--advanced--logs--conditions"></a>
### Nested Schema for `data_scope.advanced.logs.conditions`

Required:

- `filters` (Attributes List) List of filter criteria for the condition. (see [below for nested schema](#nestedatt--data_scope--advanced--logs--conditions--filters))
- `key` (String) The key for the condition (e.g., 'environment').
- `origin` (String) The origin of the key.
- `type` (String) The type of the key.

<a id="nestedatt--data_scope--advanced--logs--conditions--filters"></a>
### Nested Schema for `data_scope.advanced.logs.conditions.filters`

Required:

- `op` (String) The filter operation (e.g., 'match').
- `value` (String) The value to filter on.




<a id="nestedatt--data_scope--advanced--metrics"></a>
### Nested Schema for `data_scope.advanced.metrics`

Required:

- `conditions` (Attributes List) List of conditions for the data scope. (see [below for nested schema](#nestedatt--data_scope--advanced--metrics--conditions))
- `operator` (String) Logical operator (e.g., 'and', 'or').

Optional:

- `disabled` (Boolean) Whether this data type is disabled (no data access). When true, users have no access to this data type.

<a id="nestedatt--data_scope--advanced--metrics--conditions"></a>
### Nested Schema for `data_scope.advanced.metrics.conditions`

Required:

- `filters` (Attributes List) List of filter criteria for the condition. (see [below for nested schema](#nestedatt--data_scope--advanced--metrics--conditions--filters))
- `key` (String) The key for the condition (e.g., 'environment').
- `origin` (String) The origin of the key.
- `type` (String) The type of the key.

<a id="nestedatt--data_scope--advanced--metrics--conditions--filters"></a>
### Nested Schema for `data_scope.advanced.metrics.conditions.filters`

Required:

- `op` (String) The filter operation (e.g., 'match').
- `value` (String) The value to filter on.




<a id="nestedatt--data_scope--advanced--traces"></a>
### Nested Schema for `data_scope.advanced.traces`

Required:

- `conditions` (Attributes List) List of conditions for the data scope. (see [below for nested schema](#nestedatt--data_scope--advanced--traces--conditions))
- `operator` (String) Logical operator (e.g., 'and', 'or').

Optional:

- `disabled` (Boolean) Whether this data type is disabled (no data access). When true, users have no access to this data type.

<a id="nestedatt--data_scope--advanced--traces--conditions"></a>
### Nested Schema for `data_scope.advanced.traces.conditions`

Required:

- `filters` (Attributes List) List of filter criteria for the condition. (see [below for nested schema](#nestedatt--data_scope--advanced--traces--conditions--filters))
- `key` (String) The key for the condition (e.g., 'environment').
- `origin` (String) The origin of the key.
- `type` (String) The type of the key.

<a id="nestedatt--data_scope--advanced--traces--conditions--filters"></a>
### Nested Schema for `data_scope.advanced.traces.conditions.filters`

Required:

- `op` (String) The filter operation (e.g., 'match').
- `value` (String) The value to filter on.




<a id="nestedatt--data_scope--advanced--workloads"></a>
### Nested Schema for `data_scope.advanced.workloads`

Required:

- `conditions` (Attributes List) List of conditions for the data scope. (see [below for nested schema](#nestedatt--data_scope--advanced--workloads--conditions))
- `operator` (String) Logical operator (e.g., 'and', 'or').

Optional:

- `disabled` (Boolean) Whether this data type is disabled (no data access). When true, users have no access to this data type.

<a id="nestedatt--data_scope--advanced--workloads--conditions"></a>
### Nested Schema for `data_scope.advanced.workloads.conditions`

Required:

- `filters` (Attributes List) List of filter criteria for the condition. (see [below for nested schema](#nestedatt--data_scope--advanced--workloads--conditions--filters))
- `key` (String) The key for the condition (e.g., 'environment').
- `origin` (String) The origin of the key.
- `type` (String) The type of the key.

<a id="nestedatt--data_scope--advanced--workloads--conditions--filters"></a>
### Nested Schema for `data_scope.advanced.workloads.conditions.filters`

Required:

- `op` (String) The filter operation (e.g., 'match').
- `value` (String) The value to filter on.





<a id="nestedatt--data_scope--simple"></a>
### Nested Schema for `data_scope.simple`

Required:

- `conditions` (Attributes List) List of conditions for the data scope. (see [below for nested schema](#nestedatt--data_scope--simple--conditions))
- `operator` (String) Logical operator (e.g., 'and', 'or').

Optional:

- `disabled` (Boolean) Whether this data type is disabled (no data access). When true, users have no access to this data type.

<a id="nestedatt--data_scope--simple--conditions"></a>
### Nested Schema for `data_scope.simple.conditions`

Required:

- `filters` (Attributes List) List of filter criteria for the condition. (see [below for nested schema](#nestedatt--data_scope--simple--conditions--filters))
- `key` (String) The key for the condition (e.g., 'environment').
- `origin` (String) The origin of the key.
- `type` (String) The type of the key.

<a id="nestedatt--data_scope--simple--conditions--filters"></a>
### Nested Schema for `data_scope.simple.conditions.filters`

Required:

- `op` (String) The filter operation (e.g., 'match').
- `value` (String) The value to filter on.
