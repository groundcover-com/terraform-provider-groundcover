---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "groundcover_policy Resource - terraform-provider-groundcover"
subcategory: ""
description: |-
  Manages a groundcover RBAC policy.
---

# groundcover_policy (Resource)

Manages a groundcover RBAC policy.

## Example Usage

```terraform
# Configure the groundcover Provider
provider "groundcover" {
  # Configure API key using environment variable TF_VAR_groundcover_api_key is recommended
  # api_key = var.groundcover_api_key 
  # Or uncomment and set directly (less secure):
  # api_key = "YOUR_API_KEY_HERE"

  org_name = "groundcover" # your organization ID as provided in the installation
  # Optionally override the base URL (defaults to api.groundcover.com)
  # api_url = "https://api.your-instance.groundcover.com"
}

# Optional: Define variable for API key (recommended)
# variable "groundcover_api_key" {
#   type        = string
#   description = "groundcover API Key"
#   sensitive   = true
#   nullable    = false # Ensure it's provided (e.g., via TF_VAR_...)
# }

# Define a groundcover Policy
resource "groundcover_policy" "my_policy" {
  name        = "Example Policy (Terraform)"
  description = "This policy is managed by Terraform."
  
  # Optional: Specify SSO claim role for mapping
  claim_role  = "sso-admin-role"

  # Define policy roles (adjust keys/values as needed for your groundcover setup)
  role = {
    admin  = "admin" # key is "read"/"write"/"admin" - value is ignored
  }

  # Optional: Define data scope restrictions
  data_scope = {
    simple = {
      operator = "and" # Can be "and" or "or"
      conditions = [
        {
          key    = "cluster"
          origin = "root"
          type   = "string"
          filters = [
            {
              op    = "match"
              value = "production-cluster"
            }
          ]
        },
        {
          key    = "namespace"
          origin = "root"
          type   = "string"
          filters = [
            {
              op    = "not_match"
              value = "kube-system"
            }
          ]
        }
      ]
    }
  }
}

# Output the generated policy UUID
output "policy_uuid" {
  description = "The unique ID (UUID) of the created policy."
  value       = groundcover_policy.my_policy.uuid
}

# Output the policy revision number
output "policy_revision_number" {
  description = "The revision number of the created policy."
  value       = groundcover_policy.my_policy.revision_number
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the policy.
- `role` (Map of String) Role definitions associated with the policy. Maps role identifiers to specific permissions or access levels.

### Optional

- `claim_role` (String) SSO Role claim name used for mapping.
- `data_scope` (Attributes) Defines the data scope restrictions for the policy. (see [below for nested schema](#nestedatt--data_scope))
- `description` (String) A description for the policy.

### Read-Only

- `read_only` (Boolean) Indicates if the policy is read-only (managed internally).
- `revision_number` (Number) Revision number of the policy, used for concurrency control.
- `uuid` (String) The unique identifier (UUID) of the policy.

<a id="nestedatt--data_scope"></a>
### Nested Schema for `data_scope`

Required:

- `simple` (Attributes) Simple data scope configuration. (see [below for nested schema](#nestedatt--data_scope--simple))

<a id="nestedatt--data_scope--simple"></a>
### Nested Schema for `data_scope.simple`

Required:

- `conditions` (Attributes List) List of conditions for the data scope. (see [below for nested schema](#nestedatt--data_scope--simple--conditions))
- `operator` (String) Logical operator (e.g., 'and', 'or').

<a id="nestedatt--data_scope--simple--conditions"></a>
### Nested Schema for `data_scope.simple.conditions`

Required:

- `filters` (Attributes List) List of filter criteria for the condition. (see [below for nested schema](#nestedatt--data_scope--simple--conditions--filters))
- `key` (String) The key for the condition (e.g., 'environment').
- `origin` (String) The origin of the key.
- `type` (String) The type of the key.

<a id="nestedatt--data_scope--simple--conditions--filters"></a>
### Nested Schema for `data_scope.simple.conditions.filters`

Required:

- `op` (String) The filter operation (e.g., 'match').
- `value` (String) The value to filter on.
