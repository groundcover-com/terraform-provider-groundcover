---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "groundcover_monitor Resource - groundcover"
subcategory: ""
description: |-
  Groundcover Monitor resource managed via raw YAML.
---

# groundcover_monitor (Resource)

Groundcover Monitor resource managed via raw YAML.

## Example Usage

```terraform
# examples/resources/groundcover_monitor/resource.tf

terraform {
  required_providers {
    groundcover = {
      source  = "registry.terraform.io/groundcover-com/groundcover"
      version = ">= 0.0.0" # Replace with actual version constraint
    }
  }
}

provider "groundcover" {
  # Configure API key and Org Name via environment variables
  # export TF_VAR_groundcover_api_key="YOUR_API_KEY"
  # export TF_VAR_groundcover_backend_id="YOUR_BACKEND_ID"
  api_key    = var.groundcover_api_key
  backend_id = var.groundcover_backend_id
  # api_url = "..." # Optional: Override default API URL
}

variable "groundcover_api_key" {
  type        = string
  description = "Groundcover API Key"
  sensitive   = true
}

variable "groundcover_backend_id" {
  type        = string
  description = "Groundcover Backend ID"
}

# Example Monitor: K8s Pod Crash Looping using monitor_yaml
resource "groundcover_monitor" "k8s_pod_crash_looping" {
  monitor_yaml = <<-YAML
title: K8s Pod Crash Looping
display:
  header: K8s Pod Crash Looping
  resourceHeaderLabels:
  - workload
  contextHeaderLabels:
  - cluster
  - namespace
  - workload
  description: Kubernetes pod is on a CrashLoopBackOff for more than 5 minutes
severity: S2
measurementType: event
model:
  queries:
  - dataType: metrics
    name: threshold_input_query
    pipeline:
      function:
        name: avg_over_time
        pipelines:
        - function:
            name: avg_by
            pipelines:
            - metric: groundcover_kube_pod_container_status_waiting_reason
            args:
            - cluster
            - namespace
            - workload
        args:
        - 5m
    conditions:
    - key: reason
      origin: root
      type: string
      filters:
      - op: match
        value: CrashLoopBackOff
  thresholds:
  - name: threshold_1
    inputName: threshold_input_query
    operator: gt
    values:
    - 0
executionErrorState: OK
evaluationInterval:
  interval: 1m0s
  pendingFor: 5m0s
  YAML
}

output "monitor_example_id" {
  description = "The ID of the example Monitor created via YAML."
  value       = groundcover_monitor.k8s_pod_crash_looping.id
}

# Note: Accessing specific fields like 'title' directly is not possible
# when using monitor_yaml, as the structure is opaque to Terraform.
# You would need to parse the YAML output if required.
output "monitor_example_yaml_output" {
  description = "The YAML definition applied to the monitor."
  value       = groundcover_monitor.k8s_pod_crash_looping.monitor_yaml
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `monitor_yaml` (String) The monitor definition in YAML format.

### Read-Only

- `id` (String) Monitor identifier (UUID).
