---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "groundcover_monitor Resource - terraform-provider-groundcover"
subcategory: ""
description: |-
  Groundcover Monitor resource managed via raw YAML.
---

# groundcover_monitor (Resource)

Groundcover Monitor resource managed via raw YAML.

## Example Usage

```terraform
# examples/resources/groundcover_monitor/resource.tf

terraform {
  required_providers {
    groundcover = {
      source  = "registry.terraform.io/groundcover/groundcover"
      version = ">= 0.0.0" # Replace with actual version constraint
    }
  }
}

provider "groundcover" {
  # Configure API key and Org Name via environment variables
  # export TF_VAR_groundcover_api_key="YOUR_API_KEY"
  # export TF_VAR_groundcover_org_name="YOUR_ORG_NAME"
  api_key  = var.groundcover_api_key
  org_name = var.groundcover_org_name
  # api_url = "..." # Optional: Override default API URL
}

variable "groundcover_api_key" {
  type        = string
  description = "Groundcover API Key"
  sensitive   = true
}

variable "groundcover_org_name" {
  type        = string
  description = "Groundcover Organization Name"
}

# Example Monitor: K8s Pod Not Healthy using monitor_yaml
resource "groundcover_monitor" "k8s_pod_not_healthy_example" {
  monitor_yaml = <<-YAML
title: "Terraform Example - K8s Pod Not Healthy (YAML)"
display:
  header: "K8s Pod Not Healthy Example (YAML)"
  resource_header_labels:
    - namespace
    - workload
  context_header_labels:
    - cluster
  description: "Pod has been in a non-running state for longer than 15 minutes (Example)"
severity: "S2" # Example severity
measurement_type: state
model:
  queries:
    - data_type: metrics
      name: threshold_input_query
      pipeline:
        function:
          name: avg_over_time
          pipelines:
            - function:
                name: max_by
                pipelines:
                  - metric: groundcover_kube_pod_status_phase
                args:
                  - namespace
                  - workload
                  - cluster
          args:
            - 5m
  thresholds:
    - name: threshold_1
      input_name: threshold_input_query
      operator: gt # Example: Trigger if max phase > 0
      values:
        - 0.0
labels:
  source: terraform-example
  severity: warning
annotations:
  description: "Pod {{ .Labels.namespace }}/{{ .Labels.pod }} has been in a non-running state for longer than 15 minutes (Example)"
  summary: "Kubernetes Pod not healthy (Example)"
execution_error_state: OK
no_data_state: OK
evaluation_interval:
  interval: 5m
  pending_for: 15m
YAML
}

output "monitor_example_id" {
  description = "The ID of the example Monitor created via YAML."
  value       = groundcover_monitor.k8s_pod_not_healthy_example.id
}

# Note: Accessing specific fields like 'title' directly is not possible
# when using monitor_yaml, as the structure is opaque to Terraform.
# You would need to parse the YAML output if required.
output "monitor_example_yaml_output" {
  description = "The YAML definition applied to the monitor."
  value       = groundcover_monitor.k8s_pod_not_healthy_example.monitor_yaml
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `monitor_yaml` (String) The monitor definition in YAML format.

### Read-Only

- `id` (String) Monitor identifier (UUID).
